{% extends "base.twig" %}

{% block head %}
    {{ parent() }}
{% endblock %}

{% block title %}
    User - Register
{% endblock title %}

{% block body %}
    {{ parent() }}

    <div class="section form-wrapper" id="user-reg-form">
        {#        <div class="container">#}
        <form class="form" method="post" id="signup-form" action="{{ login_redirect }}">
            <div class="card">
                <div class="card-content">

                    <span class="card-title">Register</span>

                    <div class="input-field">
                        <input type="text" name="name" required
                               class="validate {% if error.name %} {{ "invalid" }} {% endif %}"
                               autocomplete="name"
                               id="name" value=""/>
                        <label for="name">Name</label>
                        {% if error.name %}
                            <span class="helper-text" data-error="{{ error.name }}"></span>
                        {% else %}
                            <span class="helper-text" data-error="Invalid name."></span>
                        {% endif %}
                    </div>

                    <div class="input-field">
                        <input type="email" name="email" required
                               class="validate {% if error.email %} {{ "invalid" }} {% endif %}"
                               autocomplete="email"
                               id="email" value=""/>
                        <label for="email">Email</label>
                        {% if error.email %}
                            <span class="helper-text" data-error="{{ error.email }}"></span>
                        {% else %}
                            <span class="helper-text" data-error="Invalid email"></span>
                        {% endif %}
                    </div>

                    <div class="input-field">
                        <input type="password" name="password" required
                               class="validate {% if error.password %} {{ "invalid" }} {% endif %}"
                               autocomplete="new-password"
                               id="password"/>
                        <label for="password">Password</label>
                        {% if error.password %}
                            <span class="helper-text" data-error="{{ error.password }}"></span>
                        {% endif %}
                    </div>

                    <div class="input-field">
                        <input type="password" name="r-password" required
                               class="validate {% if error.rpassword %} {{ "invalid" }} {% endif %}"
                               autocomplete="new-password"
                               id="r-password"/>
                        <label for="r-password">Retype Password</label>
                        {% if error.rpassword %}
                            <span class="helper-text" data-error="{{ error.rpassword }}"></span>
                        {% endif %}
                    </div>

                    <p>
                        <label>
                            <input class="with-gap" name="gender" type="radio" value="M"/>
                            <span>Male</span>
                        </label>
                        <label>
                            <input class="with-gap" name="gender" type="radio" value="F"/>
                            <span>Female</span>
                        </label>
                        <label>
                            <input class="with-gap" name="gender" type="radio" value="O"/>
                            <span>Other</span>
                        </label>
                    </p>

                    <div class="input-field">
                        <input type="text" name="usn" required
                               class="validate {% if error.usn %} {{ "invalid" }} {% endif %}"
                               id="usn"/>
                        <label for="usn">USN</label>
                        {% if error.usn %}
                            <span class="helper-text" data-error="{{ error.usn }}"></span>
                        {% endif %}
                    </div>

                    <div class="input-field">
                        <input type="text" name="college" required
                               class="validate {% if error.college %} {{ "invalid" }} {% endif %}"
                               id="college"/>
                        <label for="college">College</label>
                        {% if error.college %}
                            <span class="helper-text" data-error="{{ error.college }}"></span>
                        {% endif %}
                    </div>

                    <div class="input-field col s12">
                        <select id="dept" required name="dept">
                            <option value="" disabled selected>Department</option>
                            {% for department in departments %}
                                <option value="{{ department.deptID }}">{{ department.deptName }}</option>
                            {% endfor %}
                        </select>
                        <label for="dept">Department</label>
                    </div>

                    <div class="input-field">
                        <input type="number" name="semester" required
                               class="validate {% if error.semester %} {{ "invalid" }} {% endif %}"
                               id="semester"/>
                        <label for="semester">Semester</label>
                        {% if error.semester %}
                            <span class="helper-text" data-error="{{ error.semester }}"></span>
                        {% endif %}
                    </div>

                    <div class="input-field">
                        <input type="text" name="section" required
                               class="validate {% if error.section %} {{ "invalid" }} {% endif %}"
                               id="section"/>
                        <label for="section">Section</label>
                        {% if error.section %}
                            <span class="helper-text" data-error="{{ error.section }}"></span>
                        {% endif %}
                    </div>

                    <br/>
                    <div class="right-align">
                        <button class="btn waves-effect waves-light" type="submit" name="action">
                            Register
                        </button>
                    </div>
                </div>
            </div>
        </form>
        {#        </div>#}
    </div>

{% endblock %}

{% block script %}
    {{ parent() }}
    <script>
        $(document).ready(function () {
            $('select').formSelect();
        });
    </script>
{% endblock %}